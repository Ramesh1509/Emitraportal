<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic Calculator</title>
<style>
       body {
        margin: 0;
        padding: 0;
        background: #ffffff;
        font-family: Arial, sans-serif;
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: start;
    }
       .app {
        width: 100%;
        max-width: 420px;
        height: 100vh;
        background: white;
    }
       .history-bar {
        width: 95%;
        background: #eef1f6;
        padding: 10px 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #009688;
        margin-bottom: 3px;
    }
    .icon-btn {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: 0.2s;
    }
    .icon-btn:hover {
        background: #f3d9f7;
    }
    .icon-btn svg {
        width: 28px;
        height: 28px;
        stroke: #333;
        stroke-width: 2.3;
    }
       .history-box {
        width: 100%;
        background: white;
        max-height: 0;
        overflow-y: auto;    
        border-bottom: 1px solid #ddd;
        transition: 0.3s;
    }
    .history-item {
        padding: 8px 13px;
        border-bottom: 1px solid #e3dede;
        cursor: pointer;     
    }
    .history-item:hover {
        background: #f7f7f7;
    }
    .no-history {
        padding: 20px;
        text-align: center;
        color: gray;
        font-size: 15px;
    }
    .menu-popup {
        position: absolute;
        right: 20px;
        top: 55px;
        background: white;
        border: 1px solid #ccc;
        width: 150px;
        display: none;
        border-radius: 6px;
        box-shadow: 0 4px 10px #0002;
    }
    .menu-item {
        padding: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
    }
    .menu-item:hover {
        background: #f5f5f5;
    }
    .menu-item svg {
        width: 20px;
        height: 20px;
        stroke: #444;
    }
    .confirm-bg {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: #0006;
        display: none;
        justify-content: center;
        align-items: center;
    }
    .confirm-box {
        width: 260px;
        background: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
    }
    .confirm-btns {
        margin-top: 20px;
        display: flex;
        justify-content: space-around;
    }
    .btn {
        padding: 8px 18px;
        border-radius: 6px;
        cursor: pointer;
    }
    .yes {
        background: #e74c3c;
        color: white;
    }
    .cancel {
        background: #ccc;
    }

    .calc {
        width: 100%;
        background: white;
    }

    .display {
        padding: 18px;
        text-align: right;
        border-bottom: 2px solid #ddd;
    }
    .expr {
        color: gray;
        height: 18px;
        font-size: 16px;
    }
    .result {
        font-size: 34px;
        font-weight: bold;
    }
    .keys {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 3px;
        padding: 8px;
    }
    button {
        padding: 22px 0;
        font-size: 26px;
        border: none;
        border-radius: 4px;
	color: white;
        background: #2f2b57;
        box-shadow: 0 3px 10px rgba(0,0,0,0.20);
        transition: 0.18s ease-out;
    }
    .op {
        background: #009688e3;
    }
    button:hover {
        filter: brightness(1.15);
    }
    button:active {
        transform: scale(0.96);
        box-shadow: 0 2px 6px rgba(0,0,0,0.35);
    }
    .zero {
        grid-column: 1 / span 2;
        text-align: center;
        padding-left: 0px;
	background: #607d8bd4;
    }
</style>
</head>
<body>
<div class="app">
        <div class="history-bar">
        <div class="icon-btn" id="historyBtn">
            <svg viewBox="0 0 24 24" fill="none">
                <path d="M3 3v5h5"></path>
                <path d="M3.3 10A9 9 0 1 0 6 5.3L3 8"></path>
                <path d="M12 7v5l3 3"></path>
            </svg>
        </div>
        <div class="icon-btn" id="dotsBtn">
           <svg viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="5" r="2"></circle>
                <circle cx="12" cy="12" r="2"></circle>
                <circle cx="12" cy="19" r="2"></circle>
            </svg> 
        </div>
    </div>
    <div class="history-box" id="historyBox"></div>
    <div class="menu-popup" id="menuPopup">
        <div class="menu-item" id="clearHistoryBtn">
           <?xml version="1.0" encoding="utf-8"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 1024 1024" class="icon"  version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M724.3 198H296.1l54.1-146.6h320z" fill="#FAFCFB" /><path d="M724.3 216.5H296.1c-6.1 0-11.7-3-15.2-7.9-3.5-5-4.3-11.3-2.2-17L332.8 45c2.7-7.3 9.6-12.1 17.4-12.1h320c7.7 0 14.7 4.8 17.4 12.1l54.1 146.6c2.1 5.7 1.3 12-2.2 17-3.5 4.9-9.2 7.9-15.2 7.9z m-401.6-37h375.1L657.3 69.9H363.1l-40.4 109.6z" fill="#0F0F0F" /><path d="M664.3 981.6H339.7c-54.2 0-98.5-43.3-99.6-97.5L223.7 235h572.9l-32.8 651.4c-2.3 53.2-46.1 95.2-99.5 95.2z" fill="#9DC6AF" /><path d="M664.3 995H339.7c-29.7 0-57.8-11.4-79-32.2-21.2-20.8-33.3-48.6-34-78.3L210 221.6h600.7L777.2 887c-2.6 60.5-52.2 108-112.9 108zM237.4 248.3l16 635.5c0.5 22.7 9.7 44 25.9 59.8 16.2 15.9 37.7 24.6 60.4 24.6h324.6c46.3 0 84.2-36.2 86.2-82.5l32.1-637.4H237.4z" fill="#191919" /><path d="M827.1 239.5H193.3c-22.2 0-40.4-18.2-40.4-40.4v-2.2c0-22.2 18.2-40.4 40.4-40.4h633.8c22.2 0 40.4 18.2 40.4 40.4v2.2c0 22.2-18.2 40.4-40.4 40.4z" fill="#D39E33" /><path d="M826 252.9H194.4c-30.3 0-54.9-24.6-54.9-54.9 0-30.3 24.6-54.9 54.9-54.9H826c30.3 0 54.9 24.6 54.9 54.9s-24.7 54.9-54.9 54.9z m-631.6-83.1c-15.5 0-28.2 12.6-28.2 28.2s12.6 28.2 28.2 28.2H826c15.5 0 28.2-12.6 28.2-28.2 0-15.5-12.6-28.2-28.2-28.2H194.4z" fill="#111111" /><path d="M354.6 430.3v369.6" fill="#FAFCFB" /><path d="M354.6 813.3c-7.4 0-13.4-6-13.4-13.4V430.3c0-7.4 6-13.4 13.4-13.4s13.4 6 13.4 13.4v369.6c-0.1 7.4-6 13.4-13.4 13.4z" fill="#0F0F0F" /><path d="M458.3 430.3v369.6" fill="#FAFCFB" /><path d="M458.3 813.3c-7.4 0-13.4-6-13.4-13.4V430.3c0-7.4 6-13.4 13.4-13.4s13.4 6 13.4 13.4v369.6c0 7.4-6 13.4-13.4 13.4z" fill="#0F0F0F" /><path d="M562.1 430.3v369.6" fill="#FAFCFB" /><path d="M562.1 813.3c-7.4 0-13.4-6-13.4-13.4V430.3c0-7.4 6-13.4 13.4-13.4s13.4 6 13.4 13.4v369.6c-0.1 7.4-6.1 13.4-13.4 13.4z" fill="#0F0F0F" /><path d="M665.8 430.3v369.6" fill="#FAFCFB" /><path d="M665.8 813.3c-7.4 0-13.4-6-13.4-13.4V430.3c0-7.4 6-13.4 13.4-13.4s13.4 6 13.4 13.4v369.6c0 7.4-6 13.4-13.4 13.4z" fill="#0F0F0F" /></svg>           
 Clear History </div>
    </div>
    <div class="confirm-bg" id="confirmBg">
        <div class="confirm-box">
            <h3>Clear all history?</hh3>
            <div class="confirm-btns">
                <div class="btn yes" id="confirmYes">Yes</div>
                <div class="btn cancel" id="confirmCancel">Cancel</div>
            </div>
        </div>
    </div>
    <div class="calc">
        <div class="display">
            <div class="expr" id="expression"></div>
            <div class="result" id="result">0</div>
        </div>
        <div class="keys" id="keys">
            <button data-action="clear" style="background: #cd1d10db;">C</button>
            <button data-action="percent">%</button>
            <button data-action="back">⌫</button>
            <button class="op" data-action="operator" data-op="/">÷</button>
            <button data-digit="7">7</button>
            <button data-digit="8">8</button>
            <button data-digit="9">9</button>
            <button class="op" data-action="operator" data-op="*">×</button>
            <button data-digit="4">4</button>
            <button data-digit="5">5</button>
            <button data-digit="6">6</button>
            <button class="op" data-action="operator" data-op="-">−</button>
            <button data-digit="1">1</button>
            <button data-digit="2">2</button>
            <button data-digit="3">3</button>
            <button class="op" data-action="operator" data-op="+">+</button>
            <button class="zero" data-digit="0">0</button>
            <button data-digit=".">.</button>
            <button class="op" data-action="equal">=</button>
        </div>
    </div>
</div>
<script>
let expressionEl = document.getElementById("expression");
let resultEl = document.getElementById("result");
let current = "";
let previous = null;
let operator = null;
let justCalculated = false;
function updateDisplay() {
    expressionEl.textContent =
        previous !== null && operator ? previous + " " + operator : "";
    resultEl.textContent = current || "0";
}
function inputDigit(d) {
    if (justCalculated) {
        current = d === "." ? "0." : d;
        justCalculated = false;
    } else {
        if (d === "." && current.includes(".")) return;
        current = current === "0" && d !== "." ? d : current + d;
    }
    updateDisplay();
}
function clearAll() {
    current = "";
    previous = null;
    operator = null;
    updateDisplay();
}
function backspace() {
    current = current.slice(0, -1);
    updateDisplay();
}
function applyOperator(op) {
    if (current === "" && previous === null) return;
    if (previous === null) {
        previous = parseFloat(current || "0");
        operator = op;
        current = "";
    } else if (current === "") {
        operator = op;
    } else {
        compute();
        operator = op;
        previous = parseFloat(resultEl.textContent);
        current = "";
    }
    updateDisplay();
}
function percent() {
    if (current === "") return;
    current = String(parseFloat(current) / 100);
    updateDisplay();
}
function compute() {
    if (previous === null || operator === null || current === "") return;
    let a = previous;
    let b = parseFloat(current);
    let res = 0;
    switch (operator) {
        case "+": res = a + b; break;
        case "-": res = a - b; break;
        case "*": res = a * b; break;
        case "/": res = b === 0 ? "Error" : a / b; break;
    }
    resultEl.textContent = res;
    saveToHistory(`${a} ${operator} ${b} = ${res}`);
    current = res.toString();
    previous = null;
    operator = null;
    justCalculated = true;
    expressionEl.textContent = "";
}
document.getElementById("keys").onclick = (e) => {
    let btn = e.target;
    if (!btn.matches("button")) return;
    if (btn.dataset.digit) inputDigit(btn.dataset.digit);
    else if (btn.dataset.action === "clear") clearAll();
    else if (btn.dataset.action === "back") backspace();
    else if (btn.dataset.action === "percent") percent();
    else if (btn.dataset.action === "operator") applyOperator(btn.dataset.op);
    else if (btn.dataset.action === "equal") compute();
};
let historyBox = document.getElementById("historyBox");
let historyBtn = document.getElementById("historyBtn");
let dotsBtn = document.getElementById("dotsBtn");
let menuPopup = document.getElementById("menuPopup");
let confirmBg = document.getElementById("confirmBg");
historyBtn.onclick = (e) => {
    e.stopPropagation();
    menuPopup.style.display = "none";
    historyBox.style.maxHeight =
    historyBox.style.maxHeight === "0px" || historyBox.style.maxHeight === ""
            ? "123px"
            : "0px";
};
function loadHistory() {
    let h = JSON.parse(localStorage.getItem("calcHistory") || "[]");
    if (h.length === 0) {
        historyBox.innerHTML = `<div class="no-history">No History</div>`;
        return;
    }
    historyBox.innerHTML = h
        .map((i, index) => `<div class="history-item" data-index="${index}">${i}</div>`)
        .join("");
       document.querySelectorAll(".history-item").forEach(item => {
        item.onclick = () => {
            let text = item.textContent;
            let parts = text.split("=");
            if (parts.length === 2) {
                let res = parts[1].trim();
                resultEl.textContent = res;
                current = res;
                previous = null;
                operator = null;
                expressionEl.textContent = "";
                historyBox.style.maxHeight = "0px";              }
        };
    });
}
function saveToHistory(item) {
    let history = JSON.parse(localStorage.getItem("calcHistory") || "[]");
    history.unshift(item);
    if (history.length > 10) history.pop();
    localStorage.setItem("calcHistory", JSON.stringify(history));
    loadHistory();
}
dotsBtn.onclick = (e) => {
    e.stopPropagation();
    historyBox.style.maxHeight = "0px";
    menuPopup.style.display =
        menuPopup.style.display === "block" ? "none" : "block";
};
document.addEventListener("click", (e) => {
    if (!historyBtn.contains(e.target) && !historyBox.contains(e.target)) {
        historyBox.style.maxHeight = "0px";
    }
    if (!dotsBtn.contains(e.target) && !menuPopup.contains(e.target)) {
        menuPopup.style.display = "none";
    }
});
document.getElementById("clearHistoryBtn").onclick = () => {
    confirmBg.style.display = "flex";
};
document.getElementById("confirmCancel").onclick = () => {
    confirmBg.style.display = "none";
};
document.getElementById("confirmYes").onclick = () => {
    localStorage.removeItem("calcHistory");
    loadHistory();
    confirmBg.style.display = "none";
};
loadHistory();
updateDisplay();
</script>
</body>
</html>